--\\ CL Bones
	if CLIENT then
		hg.cached_children = hg.cached_children or {}
		local huytimer = CurTime()
		hook.Add("PostCleanupMap", "just_in_case_children", function()
			hg.cached_children = {}
			huytimer = CurTime()
		end)

		local entmeta = FindMetaTable("Entity")

		hg.SetModel = hg.SetModel or entmeta.SetModel

		function entmeta:SetModel(mdl)
			self.setmodeltimer = CurTime()

			return hg.SetModel(self, mdl)
		end
		
		local function recursive_get_children(ent, bone, bones, endbone)
			local children = ent:GetChildBones(bone)
			-- this should stay local since this is a recursive function

			if #children > 0 then
				local id

				for i = 1, #children do
					id = children[i]

					if id == endbone then continue end

					recursive_get_children(ent, id, bones, endbone)

					bones[#bones + 1] = id
				end
			end
		end

		hg.recursive_get_children = recursive_get_children
		
		local cached_children = hg.cached_children
		local mdl

		function hg.get_children(ent, bone, endbone)		
			bone = isstring(bone) and ent:LookupBone(bone) or bone
			
			if not bone or isstring(bone) or bone == -1 then return end
			local bones = {}

			mdl = ent:GetModel()
			--if ((math.max(huytimer) + 1) < CurTime()) and cached_children[mdl] and cached_children[mdl][bone] then return cached_children[mdl][bone] end
			
			recursive_get_children(ent, bone, bones, endbone)
			
			cached_children[mdl] = cached_children[mdl] or {}
			cached_children[mdl][bone] = bones

			return bones
		end

		function hg.bone_apply_matrix(ent, bone, new_matrix, endbone)
			bone = isstring(bone) and ent:LookupBone(bone) or bone

			if not bone or isstring(bone) or bone == -1 then return end

			local matrix = ent:GetBoneMatrix(bone)
			if not matrix then return end
			local inv_matrix = matrix:GetInverse()

			local children = hg.get_children(ent, bone, endbone)

			local translate = new_matrix * inv_matrix

			local id
			local mat

			for i = 1, #children do
				id = children[i]

				mat = ent:GetBoneMatrix(id)

				if not mat then continue end

				ent:SetBoneMatrix(id, translate * mat)
			end

			ent:SetBoneMatrix(bone, new_matrix)
		end

		local hand_poses = {
			["ak_hold"] = {
				['ValveBiped.Anim_Attachment_LH'] = Matrix({
					{-0.00000,	0.00000,	1.00000,	2.67615},
					{1.00000,	0.00000,	-0.00000,	-1.71259},
					{0.00000,	1.00000,	0.00000,	0.00000},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger42'] = Matrix({
					{-0.94591,	0.27700,	0.16890,	3.54791},
					{-0.30619,	-0.93432,	-0.18247,	-1.92862},
					{0.10726,	-0.22431,	0.96860,	-1.02161},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger41'] = Matrix({
					{-0.33096,	0.89941,	0.28551,	3.78937},
					{-0.94323,	-0.32425,	-0.07194,	-1.24072},
					{0.02788,	-0.29311,	0.95567,	-1.04199},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger4'] = Matrix({
					{-0.04830,	0.87322,	0.48492,	3.85278},
					{-0.99005,	-0.10611,	0.09247,	0.05881},
					{0.13220,	-0.47563,	0.86966,	-1.21545},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger32'] = Matrix({
					{-0.89734,	0.43983,	0.03652,	3.88898},
					{-0.43921,	-0.89806,	0.02398,	-2.14607},
					{0.04334,	0.00548,	0.99905,	-0.27673},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger31'] = Matrix({
					{-0.55578,	0.82941,	0.05636,	4.55377},
					{-0.82883,	-0.55809,	0.03974,	-1.15453},
					{0.06441,	-0.02463,	0.99762,	-0.35364},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger3'] = Matrix({
					{0.40515,	0.90826,	0.10449,	3.93042},
					{-0.91189,	0.39324,	0.11756,	0.24893},
					{0.06568,	-0.14292,	0.98755,	-0.45465},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger22'] = Matrix({
					{-0.80179,	0.59719,	-0.02193,	4.12610},
					{-0.59716,	-0.79926,	0.06765,	-2.30994},
					{0.02287,	0.06736,	0.99747,	0.36749},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger21'] = Matrix({
					{-0.55616,	0.82995,	-0.04349,	4.79871},
					{-0.83102,	-0.55479,	0.03996,	-1.30507},
					{0.00905,	0.05838,	0.99825,	0.35626},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger2'] = Matrix({
					{0.53286,	0.84495,	-0.04613,	3.88226},
					{-0.84567,	0.52979,	-0.06446,	0.14911},
					{-0.03002,	0.07336,	0.99686,	0.40833},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger12'] = Matrix({
					{-0.76564,	0.60825,	-0.20935,	4.27423},
					{-0.64018,	-0.75231,	0.15556,	-2.53366},
					{-0.06288,	0.25312,	0.96540,	1.28217},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger11'] = Matrix({
					{-0.31689,	0.90408,	-0.28674,	4.62231},
					{-0.94762,	-0.31451,	0.05561,	-1.49168},
					{-0.03991,	0.28934,	0.95639,	1.32605},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger1'] = Matrix({
					{0.43860,	0.83784,	-0.32505,	3.86847},
					{-0.89863,	0.41297,	-0.14808,	0.05353},
					{0.01017,	0.35704,	0.93404,	1.30878},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger02'] = Matrix({
					{0.50243,	0.85495,	0.12890,	2.51984},
					{-0.49077,	0.15927,	0.85660,	-1.93399},
					{0.71183,	-0.49365,	0.49961,	3.16608},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger01'] = Matrix({
					{0.52369,	0.82281,	0.22077,	1.88818},
					{-0.63107,	0.20059,	0.74934,	-1.17212},
					{0.57228,	-0.53174,	0.62429,	2.47565},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger0'] = Matrix({
					{0.59067,	0.80398,	0.06873,	0.83069},
					{-0.48029,	0.28184,	0.83060,	-0.31262},
					{0.64841,	-0.52362,	0.55262,	1.31488},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					
					
					
			},
			["pistol_hold"] = {
				['ValveBiped.Anim_Attachment_LH'] = Matrix({
					{-0.00000,	0.00000,	1.00000,	2.67621},
					{1.00000,	-0.00000,	0.00000,	-1.71246},
					{0.00000,	1.00000,	-0.00000,	0.00003},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger22'] = Matrix({
					{-0.01749,	0.99334,	0.11387,	6.02985},
					{-0.97449,	-0.04242,	0.22040,	-1.66858},
					{0.22376,	-0.10711,	0.96874,	0.55327},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger21'] = Matrix({
					{0.51410,	0.85003,	0.11468,	5.40814},
					{-0.84802,	0.48365,	0.21666,	-0.64301},
					{0.12871,	-0.20863,	0.96949,	0.39767},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger2'] = Matrix({
					{0.88753,	0.44555,	0.11738,	3.88190},
					{-0.46071,	0.86152,	0.21339,	0.14917},
					{-0.00605,	-0.24347,	0.96989,	0.40808},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger12'] = Matrix({
					{-0.09313,	0.95159,	-0.29292,	5.74945},
					{-0.98149,	-0.03829,	0.18766,	-1.67291},
					{0.16736,	0.30498,	0.93754,	2.22884},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger11'] = Matrix({
					{0.42919,	0.85458,	-0.29240,	5.27753},
					{-0.85153,	0.49078,	0.18449,	-0.73663},
					{0.30116,	0.16981,	0.93833,	1.89777},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger1'] = Matrix({
					{0.81943,	0.49413,	-0.29047,	3.86847},
					{-0.45961,	0.86925,	0.18211,	0.05353},
					{0.34248,	-0.01572,	0.93939,	1.30884},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger02'] = Matrix({
					{0.45101,	0.46180,	0.76376,	0.99359},
					{-0.89058,	0.28921,	0.35103,	-2.93256},
					{-0.05879,	-0.83851,	0.54171,	2.74484},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger01'] = Matrix({
					{0.11163,	0.71261,	0.69263,	0.85889},
					{-0.90098,	-0.22147,	0.37307,	-1.84503},
					{0.41925,	-0.66569,	0.61732,	2.23883},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger0'] = Matrix({
					{0.01574,	0.63272,	0.77422,	0.83069},
					{-0.85632,	-0.39123,	0.33713,	-0.31244},
					{0.51620,	-0.66829,	0.53565,	1.31491},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
			},
			["pistol_hold2"] = {
				['ValveBiped.Anim_Attachment_LH'] = Matrix({
					{0.00000,	0.00000,	1.00000,	2.67624},
					{1.00000,	0.00000,	0.00000,	-1.71219},
					{0.00000,	1.00000,	0.00000,	0.00125},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger22'] = Matrix({
					{-0.01749,	0.99334,	0.11387,	6.02979},
					{-0.97449,	-0.04242,	0.22040,	-1.66882},
					{0.22376,	-0.10711,	0.96874,	0.55479},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger21'] = Matrix({
					{0.51410,	0.85003,	0.11468,	5.40826},
					{-0.84802,	0.48365,	0.21666,	-0.64151},
					{0.12871,	-0.20863,	0.96949,	0.39841},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger2'] = Matrix({
					{0.88753,	0.44555,	0.11738,	3.88205},
					{-0.46071,	0.86152,	0.21339,	0.14990},
					{-0.00605,	-0.24347,	0.96989,	0.40967},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger12'] = Matrix({
					{0.04883,	0.93152,	0.36040,	5.93692},
					{-0.94806,	-0.07033,	0.31021,	-1.68707},
					{0.31431,	-0.35683,	0.87971,	1.06296},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger11'] = Matrix({
					{0.53655,	0.76259,	0.36135,	5.34744},
					{-0.84070,	0.44598,	0.30712,	-0.76180},
					{0.07304,	-0.46857,	0.88040,	0.98254},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger1'] = Matrix({
					{0.85928,	0.35981,	0.36356,	3.86862},
					{-0.47470,	0.82571,	0.30475,	0.05447},
					{-0.19054,	-0.43444,	0.88032,	1.30991},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger02'] = Matrix({
					{0.96372,	-0.25079,	0.09129,	3.71692},
					{-0.23753,	-0.65006,	0.72180,	-0.67805},
					{-0.12168,	-0.71731,	-0.68605,	2.00784},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger01'] = Matrix({
					{0.96779,	0.00605,	0.25170,	2.54880},
					{-0.18421,	-0.66437,	0.72434,	-0.45737},
					{0.17162,	-0.74738,	-0.64186,	1.80225},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger0'] = Matrix({
					{0.95950,	0.11401,	0.25760,	0.83066},
					{-0.08016,	-0.76613,	0.63767,	-0.31189},
					{0.27007,	-0.63250,	-0.72596,	1.31686},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					
			},
			["grip_hold"] = {
				['ValveBiped.Anim_Attachment_LH'] = Matrix({
					{-0.00000,	0.00000,	1.00000,	2.67603},
					{1.00000,	-0.00000,	0.00000,	-1.71242},
					{0.00000,	1.00000,	-0.00000,	-0.00003},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger22'] = Matrix({
					{-0.97924,	0.20271,	-0.00014,	3.74866},
					{-0.20076,	-0.96973,	0.13898,	-2.21208},
					{0.02804,	0.13613,	0.99029,	0.41345},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger21'] = Matrix({
					{-0.73487,	0.67761,	-0.02840,	4.63727},
					{-0.67613,	-0.72870,	0.10877,	-1.39452},
					{0.05301,	0.09914,	0.99366,	0.34940},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger2'] = Matrix({
					{0.43925,	0.89832,	-0.00901,	3.88190},
					{-0.89772,	0.43853,	-0.04240,	0.14917},
					{-0.03413,	0.02671,	0.99906,	0.40808},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger12'] = Matrix({
					{-0.99956,	-0.01974,	-0.02234,	3.86542},
					{0.01938,	-0.99968,	0.01623,	-2.35136},
					{-0.02265,	0.01579,	0.99962,	1.09308},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger11'] = Matrix({
					{-0.63952,	0.75470,	-0.14642,	4.56860},
					{-0.76220,	-0.64730,	-0.00734,	-1.51318},
					{-0.10032,	0.10691,	0.98920,	1.20340},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger1'] = Matrix({
					{0.40735,	0.87616,	-0.25768,	3.86835},
					{-0.91121,	0.37097,	-0.17910,	0.05359},
					{-0.06132,	0.30776,	0.94949,	1.30881},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger02'] = Matrix({
					{0.85313,	-0.04293,	0.51993,	2.97278},
					{-0.41533,	0.54722,	0.72667,	-2.11815},
					{-0.31571,	-0.83589,	0.44902,	2.23587},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger01'] = Matrix({
					{0.76975,	0.35296,	0.53189,	2.04376},
					{-0.63041,	0.28937,	0.72031,	-1.35727},
					{0.10032,	-0.88977,	0.44525,	2.11478},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger0'] = Matrix({
						{0.94183,	0.32924,	-0.06756,	0.83057},
						{-0.17855,	0.66041,	0.72936,	-0.31244},
						{0.28475,	-0.67487,	0.68078,	1.31494},
						{0.00000,	0.00000,	0.00000,	1.00000},
					}),
			},
			["normal"] = {
				['ValveBiped.Anim_Attachment_LH'] = Matrix({
					{-0.00000,	0.00000,	1.00000,	2.67612},
					{1.00000,	0.00000,	0.00000,	-1.71246},
					{0.00000,	1.00000,	-0.00000,	0.00011},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger22'] = Matrix({
					{-0.29595,	0.95278,	0.06800,	5.70983},
					{-0.95268,	-0.29959,	0.05143,	-1.95068},
					{0.06937,	-0.04956,	0.99636,	0.37529},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger21'] = Matrix({
					{0.33266,	0.94060,	0.06787,	5.30755},
					{-0.94279,	0.33004,	0.04704,	-0.81073},
					{0.02185,	-0.07964,	0.99658,	0.34882},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger2'] = Matrix({
					{0.82903,	0.55477,	0.07033,	3.88195},
					{-0.55815,	0.82863,	0.04294,	0.14893},
					{-0.03446,	-0.07485,	0.99660,	0.40813},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger12'] = Matrix({
					{-0.08428,	0.99281,	0.08499,	5.85923},
					{-0.99636,	-0.08288,	-0.01983,	-1.77557},
					{-0.01264,	-0.08635,	0.99618,	1.09001},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger11'] = Matrix({
					{0.46127,	0.88312,	0.08559,	5.35198},
					{-0.88521,	0.46461,	-0.02311,	-0.80212},
					{-0.06017,	-0.06510,	0.99606,	1.15631},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger1'] = Matrix({
					{0.86281,	0.49787,	0.08766,	3.86842},
					{-0.49768,	0.86698,	-0.02563,	0.05341},
					{-0.08876,	-0.02151,	0.99582,	1.30876},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger02'] = Matrix({
					{0.93636,	-0.05663,	0.34646,	3.07861},
					{-0.33561,	0.14505,	0.93076,	-1.36694},
					{-0.10297,	-0.98780,	0.11681,	2.87762},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger01'] = Matrix({
					{0.87590,	0.36578,	0.31466,	2.02138},
					{-0.37139,	0.09478,	0.92363,	-0.91876},
					{0.30802,	-0.92586,	0.21886,	2.50584},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_L_Finger0'] = Matrix({
					{0.66529,	0.65242,	0.36297,	0.83065},
					{-0.33863,	-0.16960,	0.92551,	-0.31274},
					{0.66537,	-0.73864,	0.10810,	1.31494},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),				
			},
				
		}

		local hand_posesrh = {
			["pistol_hold"] = {
				['ValveBiped.Anim_Attachment_RH'] = Matrix({
					{0.00000,	0.00000,	1.00000,	2.67606},
					{-1.00000,	0.00000,	0.00000,	-1.71246},
					{-0.00000,	-1.00000,	0.00000,	0.00002},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger22'] = Matrix({
					{-0.72247,	-0.69045,	0.03619,	3.59613},
					{0.68088,	-0.71960,	-0.13627,	-2.10107},
					{0.12013,	-0.07381,	0.99001,	-0.70821},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger21'] = Matrix({
					{-0.81663,	0.57602,	0.03631,	4.58354},
					{-0.57506,	-0.80666,	-0.13638,	-1.40582},
					{-0.04927,	-0.13225,	0.98999,	-0.64864},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger2'] = Matrix({
					{0.40803,	0.91223,	0.03655,	3.88191},
					{-0.90229,	0.40904,	-0.13621,	0.14581},
					{-0.13920,	0.02260,	0.99001,	-0.40927},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger12'] = Matrix({
					{0.38305,	0.89067,	0.24489,	6.36687},
					{-0.87335,	0.43556,	-0.21806,	-0.71552},
					{-0.30089,	-0.13035,	0.94471,	-2.29142},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger11'] = Matrix({
					{0.82500,	0.46776,	0.31714,	5.45959},
					{-0.43831,	0.88385,	-0.16339,	-0.23364},
					{-0.35672,	-0.00421,	0.93420,	-1.89915},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger1'] = Matrix({
					{0.92545,	0.20620,	0.31783,	3.86839},
					{-0.16063,	0.97334,	-0.16376,	0.04260},
					{-0.34312,	0.10050,	0.93390,	-1.30919},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger02'] = Matrix({
					{0.91919,	0.01437,	-0.39356,	2.56244},
					{-0.22476,	0.83975,	-0.49427,	-2.46594},
					{0.32339,	0.54278,	0.77512,	-1.12394},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger01'] = Matrix({
					{0.89306,	0.24370,	-0.37822,	1.48447},
					{-0.39602,	0.82473,	-0.40371,	-1.98792},
					{0.21354,	0.51032,	0.83305,	-1.38169},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger0'] = Matrix({
					{0.36535,	0.67044,	-0.64578,	0.83058},
					{-0.93006,	0.23399,	-0.28325,	-0.32336},
					{-0.03880,	0.70410,	0.70904,	-1.31224},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),

			},
			["pistol_hold2"] = {
				['ValveBiped.Anim_Attachment_RH'] = Matrix({
					{-0.00000,	-0.00000,	1.00000,	2.67590},
					{-1.00000,	0.00000,	0.00000,	-1.71245},
					{-0.00000,	-1.00000,	0.00000,	-0.00018},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger22'] = Matrix({
					{-0.72247,	-0.69045,	0.03619,	3.59595},
					{0.68088,	-0.71960,	-0.13627,	-2.10101},
					{0.12013,	-0.07381,	0.99001,	-0.70869},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger21'] = Matrix({
					{-0.81663,	0.57602,	0.03631,	4.58325},
					{-0.57506,	-0.80666,	-0.13638,	-1.40576},
					{-0.04927,	-0.13225,	0.98999,	-0.64896},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger2'] = Matrix({
					{0.40803,	0.91223,	0.03655,	3.88184},
					{-0.90229,	0.40904,	-0.13621,	0.14584},
					{-0.13920,	0.02260,	0.99001,	-0.40953},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger12'] = Matrix({
					{-0.64674,	0.67462,	0.35582,	5.34323},
					{-0.72666,	-0.68676,	-0.01868,	-1.51030},
					{0.23174,	-0.27064,	0.93437,	-1.63513},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger11'] = Matrix({
					{-0.13709,	0.89443,	0.42567,	5.49384},
					{-0.99051,	-0.11955,	-0.06781,	-0.42105},
					{-0.00976,	-0.43093,	0.90233,	-1.62455},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger1'] = Matrix({
					{0.94541,	0.27139,	0.18037,	3.86847},
					{-0.26957,	0.96235,	-0.03501,	0.04260},
					{-0.18308,	-0.01552,	0.98298,	-1.30880},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger02'] = Matrix({
					{0.99624,	0.06471,	-0.05769,	2.81659},
					{-0.08661,	0.77220,	-0.62945,	-2.12851},
					{0.00382,	0.63207,	0.77490,	-1.95563},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger01'] = Matrix({
					{0.96151,	0.27211,	-0.03794,	1.65674},
					{-0.24833,	0.80174,	-0.54364,	-1.82861},
					{-0.11751,	0.53214,	0.83846,	-1.81313},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger0'] = Matrix({
					{0.46226,	0.81687,	-0.34503,	0.83054},
					{-0.84134,	0.28111,	-0.46166,	-0.32336},
					{-0.28012,	0.50369,	0.81720,	-1.31165},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					
			},
			["ak_hold"] = {
				['ValveBiped.Anim_Attachment_RH'] = Matrix({
					{-0.00000,	0.00000,	1.00000,	2.67609},
					{-1.00000,	-0.00000,	-0.00000,	-1.71246},
					{-0.00000,	-1.00000,	0.00000,	0.00006},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger22'] = Matrix({
					{-0.93110,	0.35667,	-0.07637,	5.55054},
					{-0.31636,	-0.89387,	-0.31766,	-1.13599},
					{-0.18157,	-0.27162,	0.94512,	-0.15540},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger21'] = Matrix({
					{-0.01361,	0.98969,	-0.14256,	5.56680},
					{-0.99768,	-0.02294,	-0.06406,	0.07031},
					{-0.06667,	0.14136,	0.98771,	-0.07477},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger2'] = Matrix({
					{0.97992,	0.04619,	-0.19397,	3.88190},
					{-0.04384,	0.99890,	0.01639,	0.14563},
					{0.19451,	-0.00755,	0.98087,	-0.40924},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger12'] = Matrix({
					{-0.79259,	0.58780,	0.16215,	5.92780},
					{-0.55895,	-0.80666,	0.19203,	-1.24109},
					{0.24368,	0.06157,	0.96790,	-1.39969},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger11'] = Matrix({
					{0.34147,	0.92588,	0.16172,	5.55237},
					{-0.93122,	0.30995,	0.19173,	-0.21698},
					{0.12739,	-0.21607,	0.96803,	-1.53979},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger1'] = Matrix({
					{0.97941,	0.12047,	0.16201,	3.86835},
					{-0.15089,	0.96993,	0.19095,	0.04248},
					{-0.13414,	-0.21146,	0.96814,	-1.30917},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger02'] = Matrix({
					{0.99825,	0.01739,	-0.05635,	3.03442},
					{-0.04002,	0.90167,	-0.43059,	-2.16174},
					{0.04332,	0.43209,	0.90079,	-1.86401},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger01'] = Matrix({
					{0.90272,	0.42076,	-0.08968,	1.94482},
					{-0.41680,	0.80369,	-0.42469,	-1.65881},
					{-0.10661,	0.42075,	0.90088,	-1.73535},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger0'] = Matrix({
					{0.62252,	0.77258,	-0.12482,	0.83057},
					{-0.74605,	0.53767,	-0.39285,	-0.32355},
					{-0.23639,	0.33768,	0.91109,	-1.31219},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
			},
			["normal"] = {
				['ValveBiped.Anim_Attachment_RH'] = Matrix({
					{0.00000,	0.00000,	1.00000,	2.67609},
					{-1.00000,	0.00000,	0.00000,	-1.71240},
					{0.00000,	-1.00000,	0.00000,	-0.00003},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger22'] = Matrix({
					{-0.96502,	0.21943,	0.14350,	4.92922},
					{-0.22411,	-0.97441,	-0.01712,	-2.37482},
					{0.13607,	-0.04868,	0.98950,	-0.60452},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger21'] = Matrix({
					{-0.04046,	0.98880,	0.14365,	4.97814},
					{-0.99912,	-0.03840,	-0.01709,	-1.16669},
					{-0.01138,	-0.14422,	0.98948,	-0.59076},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger2'] = Matrix({
					{0.63750,	0.75694,	0.14366,	3.88191},
					{-0.76319,	0.64595,	-0.01679,	0.14569},
					{-0.10551,	-0.09894,	0.98948,	-0.40930},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger12'] = Matrix({
					{-0.06498,	0.97425,	0.21589,	6.14457},
					{-0.99649,	-0.05193,	-0.06558,	-1.45105},
					{-0.05268,	-0.21940,	0.97421,	-1.85055},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger11'] = Matrix({
					{0.67922,	0.70148,	0.21586,	5.39766},
					{-0.70660,	0.70452,	-0.06612,	-0.67401},
					{-0.19846,	-0.10761,	0.97418,	-1.63230},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger1'] = Matrix({
					{0.88940,	0.41611,	0.18924,	3.86839},
					{-0.41671,	0.90822,	-0.03854,	0.04260},
					{-0.18791,	-0.04458,	0.98117,	-1.30923},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger02'] = Matrix({
					{0.96589,	0.23494,	-0.10889,	2.51287},
					{-0.25337,	0.77071,	-0.58465,	-2.42767},
					{-0.05343,	0.59230,	0.80395,	-1.96227},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger01'] = Matrix({
					{0.90463,	0.41992,	-0.07287,	1.42098},
					{-0.39736,	0.76919,	-0.50046,	-1.94806},
					{-0.15410,	0.48169,	0.86269,	-1.77628},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
					['ValveBiped.Bip01_R_Finger0'] = Matrix({
					{0.32986,	0.86917,	-0.36843,	0.83059},
					{-0.90773,	0.18485,	-0.37663,	-0.32330},
					{-0.25925,	0.45867,	0.84995,	-1.31228},
					{0.00000,	0.00000,	0.00000,	1.00000},
					}),
			},
		}

		function hg.set_hold(ent, hold, copyent)
			local lhmat = ent:GetBoneMatrix(ent:LookupBone("ValveBiped.Bip01_L_Hand"))
			ent.hold = hold
			for bone, invmat in pairs(hand_poses[hold]) do
				local name = bone
				bone = isstring(bone) and ent:LookupBone(bone) or bone
				if not bone or isstring(bone) or bone == -1 then continue end
				if not ent:GetBoneMatrix(bone) then continue end
				if IsValid(copyent) and copyent:LookupBone(name) then
					local mat = copyent:GetBoneMatrix(copyent:LookupBone(name))
					if mat then
						ent:SetBoneMatrix(bone, mat)
					else
						ent:SetBoneMatrix(bone,lhmat * invmat)
					end
				else
					ent:SetBoneMatrix(bone,lhmat * invmat)
				end
			end
		end

		function hg.set_holdrh(ent, hold, copyent)
			local lhmat = ent:GetBoneMatrix(ent:LookupBone("ValveBiped.Bip01_R_Hand"))
			ent.holdrh = hold
			for bone,invmat in pairs(hand_posesrh[hold]) do
				local name = bone
				bone = isstring(bone) and ent:LookupBone(bone) or bone
				if not bone or isstring(bone) or bone == -1 then continue end
				if not ent:GetBoneMatrix(bone) then continue end
				if IsValid(copyent) and copyent:LookupBone(name) then
					local mat = copyent:GetBoneMatrix(copyent:LookupBone(name))
					if mat then
						ent:SetBoneMatrix(bone, mat)
					else
						ent:SetBoneMatrix(bone,lhmat * invmat)
					end
				else
					ent:SetBoneMatrix(bone,lhmat * invmat)
				end
			end
		end

		function hg.copy_hold(ply)
			local lh = ply:LookupBone("ValveBiped.Bip01_L_Hand")
			local lhmat = ply:GetBoneMatrix(lh)
			print("\n")
			for i,bone in pairs(hg.get_children(ply,lh)) do
				local bon = ply:GetBoneName(bone)
				print("['"..bon.."'] = Matrix({\n"..string.Replace(string.Replace(tostring(lhmat:GetInverse() * ply:GetBoneMatrix(bone)),"[","{"),"]","},").."\n}),")
			end
			print("\n")
		end

		function hg.copy_holdrh(ply)
			local lh = ply:LookupBone("ValveBiped.Bip01_R_Hand")
			local lhmat = ply:GetBoneMatrix(lh)
			print("\n")
			for i,bone in pairs(hg.get_children(ply,lh)) do
				local bon = ply:GetBoneName(bone)
				print("['"..bon.."'] = Matrix({\n"..string.Replace(string.Replace(tostring(lhmat:GetInverse() * ply:GetBoneMatrix(bone)),"[","{"),"]","},").."\n}),")
			end
			print("\n")
		end

		local hg_tpik_distance = ConVarExists("hg_tpik_distance") and GetConVar("hg_tpik_distance") or CreateClientConVar("hg_tpik_distance",1024,true,false,"The distance (in hammer units) at which the third person inverse kinematics enables, 0 = inf",0,2048)

		local render_GetViewSetup = render.GetViewSetup
		function hg.ShouldTPIK(ply,wpn)
			local time = CurTime()
			if (ply.cachedtpik or 0) > time then return ply.cachedval end
			ply.cachedtpik = time + 0.1
			local int = hg_tpik_distance:GetInt()
			if (int == 0 or ply == LocalPlayer() or ply == LocalPlayer():GetNWEntity("spect")) then ply.cachedval = true return true end
			local view = render.GetViewSetup(true)
			if (ply:GetPos():DistToSqr(view.origin) > int*int) then ply.cachedval = false return false end
			ply.cachedval = true
			return true
		end

		--copy hold делаешь когда нужно скопировать пальчики левой руки
		--set hold когда хочешь чтобы пальчики встали ровно как надо по копии (и не двигались)
		--hg.copy_hold(Entity(1))
	end
--//